const grid = document.getElementById('grid');
const winText = document.getElementById('win');
const balanceText = document.getElementById('balance');
const betText = document.getElementById('bet');

let balance = 1000;
let bet = 10;
let minesCount = 3;
let mines = [];
let opened = 0;
let gameOver = false;

document.getElementById('betPlus').onclick = () => {
  if (!gameOver) bet += 10;
  betText.textContent = bet;
};

document.getElementById('betMinus').onclick = () => {
  if (!gameOver && bet > 10) bet -= 10;
  betText.textContent = bet;
};

document.getElementById('restart').onclick = startGame;
document.getElementById('cashout').onclick = cashOut;

function startGame() {
  if (balance < bet) return alert('ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÑ€ÐµÐ´ÑÑ‚Ð²');

  balance -= bet;
  balanceText.textContent = balance;

  gameOver = false;
  opened = 0;
  winText.textContent = '1.00x';

  grid.innerHTML = '';
  mines = [];

  while (mines.length < minesCount) {
    let r = Math.floor(Math.random() * 25);
    if (!mines.includes(r)) mines.push(r);
  }

  for (let i = 0; i < 25; i++) {
    const cell = document.createElement('div');
    cell.className = 'cell';
    cell.onclick = () => openCell(i, cell);
    grid.appendChild(cell);
  }
}

function openCell(i, cell) {
  if (gameOver || cell.classList.contains('open')) return;

  cell.classList.add('open');

  if (mines.includes(i)) {
    cell.classList.add('mine');
    gameOver = true;
    revealMines();
    setTimeout(() => alert('ðŸ’¥ Mine! You lost'), 200);
  } else {
    cell.classList.add('safe');
    opened++;
    winText.textContent = (1 + opened * 0.2).toFixed(2) + 'x';
  }
}

function revealMines() {
  [...grid.children].forEach((cell, i) => {
    if (mines.includes(i)) {
      cell.classList.add('mine');
    }
  });
}

function cashOut() {
  if (gameOver || opened === 0) return;

  const win = Math.floor(bet * parseFloat(winText.textContent));
  balance += win;
  balanceText.textContent = balance;
  gameOver = true;
}





